<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Case Timeline - Personal AI Legal Advocate</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #0f172a;
            color: white;
            overflow-x: hidden;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar Styles */
        .sidebar {
            width: 250px;
            background-color: #1e293b;
            border-right: 1px solid #334155;
            padding: 1rem 0;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }

        .logo {
            display: flex;
            align-items: center;
            padding: 0 1rem 1rem;
            margin-bottom: 1rem;
            border-bottom: 1px solid #334155;
        }

        .logo-icon {
            width: 24px;
            height: 24px;
            fill: #06b6d4;
            margin-right: 0.5rem;
        }

        .logo-text {
            font-size: 1.125rem;
            font-weight: 600;
            color: white;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            color: #94a3b8;
            text-decoration: none;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }

        .nav-item:hover {
            background-color: #334155;
            color: white;
        }

        .nav-item.active {
            background-color: #1e40af;
            color: white;
            border-left-color: #06b6d4;
        }

        .nav-icon {
            width: 20px;
            height: 20px;
            margin-right: 0.75rem;
            fill: currentColor;
        }

        /* Mobile menu toggle */
        .mobile-menu-toggle {
            display: none;
            position: fixed;
            top: 1rem;
            left: 1rem;
            z-index: 1000;
            background-color: #1e40af;
            color: white;
            border: none;
            border-radius: 0.375rem;
            padding: 0.5rem;
            cursor: pointer;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 250px;
            padding: 2rem;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 2rem;
        }

        .header-content h1 {
            font-size: 1.875rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
        }

        .header-icon {
            width: 24px;
            height: 24px;
            fill: #06b6d4;
            margin-right: 0.75rem;
        }

        .header-content p {
            color: #94a3b8;
        }

        .generate-timeline-btn {
            background-color: #06b6d4;
            color: white;
            border: none;
            border-radius: 0.5rem;
            padding: 0.75rem 1.5rem;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
        }

        .generate-timeline-btn:hover {
            background-color: #0891b2;
            transform: translateY(-1px);
        }

        .generate-timeline-btn:disabled {
            background-color: #374151;
            cursor: not-allowed;
            transform: none;
        }

        .btn-icon {
            width: 16px;
            height: 16px;
            fill: currentColor;
            margin-right: 0.5rem;
        }

        /* Empty State */
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 400px;
            text-align: center;
        }

        .empty-icon {
            width: 64px;
            height: 64px;
            fill: #64748b;
            margin-bottom: 1rem;
        }

        .empty-state h2 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #94a3b8;
        }

        .empty-state p {
            color: #64748b;
            max-width: 400px;
        }

        /* Timeline Styles */
        .timeline-container {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .timeline-container.show {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .timeline-header {
            background-color: #1e293b;
            border: 1px solid #334155;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .timeline-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 600;
            color: #06b6d4;
        }

        .stat-label {
            font-size: 0.875rem;
            color: #94a3b8;
            margin-top: 0.25rem;
        }

        .timeline-disclaimer {
            background-color: #fef3c7;
            color: #92400e;
            padding: 0.75rem;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            border-left: 4px solid #f59e0b;
        }

        /* Timeline Items */
        .timeline {
            position: relative;
            padding-left: 2rem;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 1rem;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(to bottom, #06b6d4, #1e40af);
        }

        .timeline-item {
            position: relative;
            margin-bottom: 2rem;
            background-color: #1e293b;
            border: 1px solid #334155;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-left: 1rem;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -2.5rem;
            top: 1.5rem;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: #06b6d4;
            border: 3px solid #0f172a;
        }

        .timeline-item.completed::before {
            background-color: #10b981;
        }

        .timeline-item.current::before {
            background-color: #f59e0b;
            animation: pulse 2s infinite;
        }

        .timeline-item.future::before {
            background-color: #64748b;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .timeline-header-item {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .timeline-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: white;
            margin-bottom: 0.25rem;
        }

        .timeline-phase {
            font-size: 0.75rem;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-weight: 500;
        }

        .phase-preparation {
            background-color: rgba(59, 130, 246, 0.2);
            color: #60a5fa;
        }

        .phase-filing {
            background-color: rgba(245, 158, 11, 0.2);
            color: #fbbf24;
        }

        .phase-proceedings {
            background-color: rgba(139, 92, 246, 0.2);
            color: #a78bfa;
        }

        .phase-resolution {
            background-color: rgba(16, 185, 129, 0.2);
            color: #34d399;
        }

        .timeline-date {
            font-size: 0.875rem;
            color: #94a3b8;
            margin-bottom: 0.5rem;
        }

        .timeline-description {
            color: #d1d5db;
            line-height: 1.5;
            margin-bottom: 1rem;
        }

        .timeline-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .action-tag {
            font-size: 0.75rem;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            background-color: #374151;
            color: #d1d5db;
        }

        .action-tag.important {
            background-color: rgba(239, 68, 68, 0.2);
            color: #fca5a5;
        }

        .action-tag.document {
            background-color: rgba(16, 185, 129, 0.2);
            color: #6ee7b7;
        }

        .timeline-duration {
            font-size: 0.75rem;
            color: #64748b;
            margin-top: 0.5rem;
            font-style: italic;
        }

        /* Loading Spinner */
        .loading-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid #374151;
            border-top: 2px solid #06b6d4;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .mobile-menu-toggle {
                display: block;
            }

            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
                z-index: 999;
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
                padding: 1rem;
                padding-top: 4rem;
            }

            .header {
                flex-direction: column;
                gap: 1rem;
            }

            .timeline-stats {
                grid-template-columns: 1fr 1fr;
            }

            .timeline {
                padding-left: 1.5rem;
            }

            .timeline::before {
                left: 0.75rem;
            }

            .timeline-item {
                margin-left: 0.75rem;
            }

            .timeline-item::before {
                left: -2rem;
            }
        }
    </style>
</head>
<body>
    <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
        </svg>
    </button>

    <div class="container">
        <!-- Sidebar -->
        <nav class="sidebar" id="sidebar">
            <div class="logo">
                <svg class="logo-icon" viewBox="0 0 24 24">
                    <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 7V9C15 10.1 15.9 11 17 11V20C17 21.1 16.1 22 15 22H9C7.9 22 7 21.1 7 20V11C8.1 11 9 10.1 9 9V7H3V9C3 10.1 3.9 11 5 11V20C5 21.1 5.9 22 7 22H17C18.1 22 19 21.1 19 20V11C20.1 11 21 10.1 21 9Z"/>
                </svg>
                <span class="logo-text">PALA</span>
            </div>

            <a href="dashboard.html" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
                </svg>
                Dashboard
            </a>

            <a href="ai-chat-advocate.html" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/>
                </svg>
                AI Chat Advocate
            </a>

            <a href="case-details-with-summary.html" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 2 2h8c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-5 2h6v2H9V4zm3 17c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>
                </svg>
                Case Details
            </a>

            <a href="case-timeline.html" class="nav-item active">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/>
                    <path d="M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
                </svg>
                Case Timeline
            </a>

            <a href="#" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M9 11H7v6h2v-6zm4 0h-2v6h2v-6zm4 0h-2v6h2v-6zm2.5-9H19v2h-1.5v17.5c0 .83-.67 1.5-1.5 1.5h-9c-.83 0-1.5-.67-1.5-1.5V4H4V2h4.5l1-1h5l1 1H20v2z"/>
                </svg>
                Strategy & Risks
            </a>

            <a href="#" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 2 2h8c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-5 2h6v2H9V4zm3 17c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>
                </svg>
                Document Assistant
            </a>

            <a href="#" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/>
                </svg>
                Communication Coach
            </a>

            <a href="#" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                </svg>
                Private Journal
            </a>

            <a href="#" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M20.5 3l-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM10 5.47l4 1.4v11.66l-4-1.4V5.47z"/>
                </svg>
                Resource Finder
            </a>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <div class="header">
                <div class="header-content">
                    <h1>
                        <svg class="header-icon" viewBox="0 0 24 24">
                            <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/>
                            <path d="M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
                        </svg>
                        Case Timeline
                    </h1>
                    <p>An AI-generated projection of your case's key stages.</p>
                </div>
                <button class="generate-timeline-btn" id="generateTimelineBtn" onclick="generateTimeline()">
                    <svg class="btn-icon" viewBox="0 0 24 24">
                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>
                    Generate Timeline
                </button>
            </div>

            <!-- Empty State -->
            <div class="empty-state" id="emptyState">
                <svg class="empty-icon" viewBox="0 0 24 24">
                    <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
                </svg>
                <h2>No timeline generated yet</h2>
                <p>Click the button above to generate a possible timeline based on your case details.</p>
            </div>

            <!-- Timeline Container -->
            <div class="timeline-container" id="timelineContainer">
                <!-- Timeline Header with Stats -->
                <div class="timeline-header">
                    <div class="timeline-stats">
                        <div class="stat-item">
                            <div class="stat-value" id="totalDuration">6-12</div>
                            <div class="stat-label">Months (Estimated)</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="totalStages">8</div>
                            <div class="stat-label">Key Stages</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="currentStage">2</div>
                            <div class="stat-label">Current Stage</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="completionRate">25%</div>
                            <div class="stat-label">Progress</div>
                        </div>
                    </div>
                    <div class="timeline-disclaimer">
                        <strong>⚠️ Disclaimer:</strong> This timeline is an AI-generated estimate based on typical case patterns and your provided details. Actual timelines may vary significantly based on court schedules, case complexity, and other factors. Always consult with your attorney for accurate projections.
                    </div>
                </div>

                <!-- Timeline Items -->
                <div class="timeline" id="timelineItems">
                    <!-- Timeline items will be generated here -->
                </div>
            </div>
        </main>
    </div>

    <script>
        // Mobile menu toggle
        function toggleMobileMenu() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('open');
        }

        // Close mobile menu when clicking outside
        document.addEventListener('click', function(event) {
            const sidebar = document.getElementById('sidebar');
            const toggle = document.querySelector('.mobile-menu-toggle');
            
            if (!sidebar.contains(event.target) && !toggle.contains(event.target)) {
                sidebar.classList.remove('open');
            }
        });

        // Timeline templates based on case types
        const timelineTemplates = {
            property: {
                duration: "8-15 months",
                stages: [
                    {
                        title: "Case Preparation & Documentation",
                        phase: "preparation",
                        date: "Week 1-4",
                        status: "completed",
                        description: "Gather all property documents, title deeds, sale agreements, and evidence. Consult with property lawyer and file initial documentation.",
                        actions: ["Document Collection", "Legal Consultation", "Evidence Gathering"],
                        duration: "3-4 weeks"
                    },
                    {
                        title: "Legal Notice & Response",
                        phase: "preparation", 
                        date: "Week 5-8",
                        status: "current",
                        description: "Send legal notice to the opposing party. Wait for their response (30 days). Attempt negotiation and settlement discussions.",
                        actions: ["Legal Notice", "Settlement Talks", "Response Analysis"],
                        duration: "4 weeks"
                    },
                    {
                        title: "Filing Civil Suit",
                        phase: "filing",
                        date: "Month 3-4",
                        status: "future",
                        description: "File civil suit in appropriate court. Pay court fees and serve summons to defendants. Court will schedule first hearing.",
                        actions: ["Court Filing", "Summons Service", "Fee Payment"],
                        duration: "4-6 weeks"
                    },
                    {
                        title: "Written Statement & Issues Framing",
                        phase: "proceedings",
                        date: "Month 4-5",
                        status: "future",
                        description: "Defendants file written statement. Court frames issues and decides on interim orders if requested.",
                        actions: ["Written Statement", "Issues Framing", "Interim Orders"],
                        duration: "4-6 weeks"
                    },
                    {
                        title: "Evidence Recording",
                        phase: "proceedings",
                        date: "Month 6-10",
                        status: "future",
                        description: "Both parties present evidence, examine witnesses, and submit documents. This is typically the longest phase.",
                        actions: ["Witness Examination", "Document Submission", "Evidence Recording"],
                        duration: "4-6 months"
                    },
                    {
                        title: "Final Arguments",
                        phase: "proceedings",
                        date: "Month 11-12",
                        status: "future",
                        description: "Both sides present final arguments. Court may ask for additional documents or clarifications.",
                        actions: ["Final Arguments", "Legal Submissions", "Court Queries"],
                        duration: "4-6 weeks"
                    },
                    {
                        title: "Judgment & Decree",
                        phase: "resolution",
                        date: "Month 12-15",
                        status: "future",
                        description: "Court delivers judgment. If favorable, obtain certified copy of decree and prepare for execution if needed.",
                        actions: ["Judgment Delivery", "Decree Copy", "Execution Planning"],
                        duration: "2-4 weeks"
                    },
                    {
                        title: "Execution/Appeal (if needed)",
                        phase: "resolution",
                        date: "Month 15+",
                        status: "future",
                        description: "Execute decree if other party doesn't comply, or handle appeals if judgment is challenged.",
                        actions: ["Decree Execution", "Appeal Handling", "Final Settlement"],
                        duration: "Variable"
                    }
                ]
            },
            employment: {
                duration: "4-8 months",
                stages: [
                    {
                        title: "Internal Grievance Process",
                        phase: "preparation",
                        date: "Week 1-2",
                        status: "completed",
                        description: "File internal complaint with HR department. Document all communications and maintain records of the grievance process.",
                        actions: ["HR Complaint", "Documentation", "Internal Process"],
                        duration: "2 weeks"
                    },
                    {
                        title: "Conciliation Attempt",
                        phase: "preparation",
                        date: "Week 3-6",
                        status: "current",
                        description: "Attempt conciliation through company's internal mechanisms or external mediator before formal legal action.",
                        actions: ["Mediation", "Settlement Talks", "Conciliation"],
                        duration: "3-4 weeks"
                    },
                    {
                        title: "Labour Department Complaint",
                        phase: "filing",
                        date: "Month 2-3",
                        status: "future",
                        description: "File complaint with Labour Commissioner or appropriate authority. Submit all relevant documents and evidence.",
                        actions: ["Labour Complaint", "Document Submission", "Official Filing"],
                        duration: "2-4 weeks"
                    },
                    {
                        title: "Investigation & Inquiry",
                        phase: "proceedings",
                        date: "Month 3-5",
                        status: "future",
                        description: "Labour department conducts investigation. Both parties present their case and evidence to the investigating officer.",
                        actions: ["Investigation", "Evidence Presentation", "Inquiry Process"],
                        duration: "2-3 months"
                    },
                    {
                        title: "Labour Court Proceedings",
                        phase: "proceedings",
                        date: "Month 5-7",
                        status: "future",
                        description: "If conciliation fails, case proceeds to Labour Court. Present arguments and evidence before the judge.",
                        actions: ["Court Hearings", "Legal Arguments", "Evidence Recording"],
                        duration: "2-3 months"
                    },
                    {
                        title: "Judgment & Award",
                        phase: "resolution",
                        date: "Month 7-8",
                        status: "future",
                        description: "Labour Court delivers judgment. If favorable, obtain award copy and prepare for implementation.",
                        actions: ["Judgment", "Award Copy", "Implementation"],
                        duration: "2-4 weeks"
                    }
                ]
            },
            family: {
                duration: "6-18 months",
                stages: [
                    {
                        title: "Counseling & Mediation",
                        phase: "preparation",
                        date: "Month 1-2",
                        status: "completed",
                        description: "Attempt family counseling and mediation as required by law. Document all attempts at reconciliation.",
                        actions: ["Family Counseling", "Mediation", "Reconciliation Attempts"],
                        duration: "1-2 months"
                    },
                    {
                        title: "Filing Petition",
                        phase: "filing",
                        date: "Month 2-3",
                        status: "current",
                        description: "File divorce/family petition in Family Court. Submit marriage certificate, evidence, and other required documents.",
                        actions: ["Petition Filing", "Document Submission", "Court Fees"],
                        duration: "2-4 weeks"
                    },
                    {
                        title: "Service of Summons",
                        phase: "filing",
                        date: "Month 3-4",
                        status: "future",
                        description: "Court serves summons to respondent. Respondent has 30 days to file counter or response.",
                        actions: ["Summons Service", "Response Period", "Counter Filing"],
                        duration: "4-6 weeks"
                    },
                    {
                        title: "Interim Orders",
                        phase: "proceedings",
                        date: "Month 4-5",
                        status: "future",
                        description: "Apply for interim maintenance, child custody, or other urgent relief. Court decides on temporary arrangements.",
                        actions: ["Interim Applications", "Maintenance Orders", "Custody Arrangements"],
                        duration: "4-6 weeks"
                    },
                    {
                        title: "Evidence & Cross-Examination",
                        phase: "proceedings",
                        date: "Month 6-12",
                        status: "future",
                        description: "Both parties present evidence, examine witnesses, and submit documents. Longest phase of family proceedings.",
                        actions: ["Evidence Recording", "Witness Examination", "Document Proof"],
                        duration: "6-8 months"
                    },
                    {
                        title: "Final Arguments",
                        phase: "proceedings",
                        date: "Month 12-15",
                        status: "future",
                        description: "Final arguments by both parties. Court may suggest final settlement or mediation before judgment.",
                        actions: ["Final Arguments", "Settlement Attempts", "Legal Submissions"],
                        duration: "2-3 months"
                    },
                    {
                        title: "Decree & Implementation",
                        phase: "resolution",
                        date: "Month 15-18",
                        status: "future",
                        description: "Court grants decree. Implement custody, maintenance, and property division orders as per judgment.",
                        actions: ["Decree Grant", "Property Division", "Custody Implementation"],
                        duration: "2-3 months"
                    }
                ]
            },
            consumer: {
                duration: "3-6 months",
                stages: [
                    {
                        title: "Complaint Preparation",
                        phase: "preparation",
                        date: "Week 1-2",
                        status: "completed",
                        description: "Gather all bills, receipts, warranty cards, and correspondence with the company. Prepare detailed complaint.",
                        actions: ["Document Collection", "Complaint Drafting", "Evidence Gathering"],
                        duration: "1-2 weeks"
                    },
                    {
                        title: "Filing in Consumer Forum",
                        phase: "filing",
                        date: "Week 3-4",
                        status: "current",
                        description: "File complaint in appropriate Consumer Forum (District/State/National) based on claim amount. Pay prescribed fees.",
                        actions: ["Forum Filing", "Fee Payment", "Complaint Submission"],
                        duration: "1-2 weeks"
                    },
                    {
                        title: "Notice to Opposite Party",
                        phase: "filing",
                        date: "Month 2",
                        status: "future",
                        description: "Consumer Forum issues notice to the company/service provider. They have 30 days to file their response.",
                        actions: ["Notice Issuance", "Response Period", "Company Reply"],
                        duration: "4-6 weeks"
                    },
                    {
                        title: "Hearings & Evidence",
                        phase: "proceedings",
                        date: "Month 2-4",
                        status: "future",
                        description: "Attend hearings, present evidence, and examine witnesses. Consumer Forums typically have faster proceedings.",
                        actions: ["Forum Hearings", "Evidence Presentation", "Witness Examination"],
                        duration: "2-3 months"
                    },
                    {
                        title: "Final Order",
                        phase: "resolution",
                        date: "Month 4-6",
                        status: "future",
                        description: "Consumer Forum passes final order. If favorable, company must comply within specified time or face penalties.",
                        actions: ["Final Order", "Compliance Period", "Penalty Enforcement"],
                        duration: "1-2 months"
                    }
                ]
            },
            criminal: {
                duration: "12-24 months",
                stages: [
                    {
                        title: "FIR Filing & Investigation",
                        phase: "preparation",
                        date: "Month 1-3",
                        status: "completed",
                        description: "File FIR at police station. Police conduct investigation, record statements, and collect evidence.",
                        actions: ["FIR Filing", "Police Investigation", "Evidence Collection"],
                        duration: "2-3 months"
                    },
                    {
                        title: "Charge Sheet Filing",
                        phase: "filing",
                        date: "Month 3-4",
                        status: "current",
                        description: "Police file charge sheet in court if evidence found. Court takes cognizance and issues process to accused.",
                        actions: ["Charge Sheet", "Court Cognizance", "Process Issuance"],
                        duration: "4-6 weeks"
                    },
                    {
                        title: "Framing of Charges",
                        phase: "proceedings",
                        date: "Month 4-6",
                        status: "future",
                        description: "Court frames charges against accused. Accused pleads guilty or not guilty. Trial begins if plea is not guilty.",
                        actions: ["Charge Framing", "Plea Recording", "Trial Commencement"],
                        duration: "2-3 months"
                    },
                    {
                        title: "Prosecution Evidence",
                        phase: "proceedings",
                        date: "Month 6-12",
                        status: "future",
                        description: "Prosecution presents evidence and examines witnesses. This includes victim testimony and expert evidence.",
                        actions: ["Prosecution Evidence", "Witness Examination", "Expert Testimony"],
                        duration: "6-8 months"
                    },
                    {
                        title: "Defense Evidence",
                        phase: "proceedings",
                        date: "Month 12-18",
                        status: "future",
                        description: "Defense presents their case, examines witnesses, and challenges prosecution evidence.",
                        actions: ["Defense Evidence", "Cross-Examination", "Defense Witnesses"],
                        duration: "4-6 months"
                    },
                    {
                        title: "Final Arguments & Judgment",
                        phase: "resolution",
                        date: "Month 18-24",
                        status: "future",
                        description: "Both sides present final arguments. Court delivers judgment - conviction or acquittal.",
                        actions: ["Final Arguments", "Judgment", "Sentencing/Acquittal"],
                        duration: "2-4 months"
                    }
                ]
            },
            tenant: {
                duration: "6-12 months",
                stages: [
                    {
                        title: "Notice Period & Documentation",
                        phase: "preparation",
                        date: "Month 1",
                        status: "completed",
                        description: "Serve proper notice as per tenancy agreement. Document all communications and maintain rent payment records.",
                        actions: ["Legal Notice", "Documentation", "Rent Records"],
                        duration: "2-4 weeks"
                    },
                    {
                        title: "Rent Controller Application",
                        phase: "filing",
                        date: "Month 1-2",
                        status: "current",
                        description: "File application with Rent Controller for eviction or rent-related issues. Submit all required documents.",
                        actions: ["Rent Controller Filing", "Document Submission", "Application Fees"],
                        duration: "3-4 weeks"
                    },
                    {
                        title: "Tenant Response & Counter",
                        phase: "proceedings",
                        date: "Month 2-3",
                        status: "future",
                        description: "Tenant files response and may file counter-claims. Rent Controller examines preliminary issues.",
                        actions: ["Tenant Response", "Counter Claims", "Preliminary Hearing"],
                        duration: "4-6 weeks"
                    },
                    {
                        title: "Evidence Recording",
                        phase: "proceedings",
                        date: "Month 4-8",
                        status: "future",
                        description: "Both parties present evidence regarding tenancy terms, rent payments, and grounds for eviction.",
                        actions: ["Evidence Recording", "Witness Examination", "Document Proof"],
                        duration: "4-5 months"
                    },
                    {
                        title: "Final Order & Execution",
                        phase: "resolution",
                        date: "Month 8-12",
                        status: "future",
                        description: "Rent Controller passes final order. If eviction granted, execute order through court bailiff if needed.",
                        actions: ["Final Order", "Eviction Execution", "Possession Recovery"],
                        duration: "2-4 months"
                    }
                ]
            }
        };

        // Generate timeline based on case details
        function generateTimeline() {
            const generateBtn = document.getElementById('generateTimelineBtn');
            const emptyState = document.getElementById('emptyState');
            const timelineContainer = document.getElementById('timelineContainer');

            // Show loading state
            generateBtn.disabled = true;
            generateBtn.innerHTML = '<div class="loading-spinner"></div>Generating Timeline...';

            // Get case details from localStorage
            const caseDetails = JSON.parse(localStorage.getItem('caseDetails') || '{}');
            const caseType = caseDetails.caseType || 'other';

            // Simulate AI processing
            setTimeout(() => {
                // Get appropriate timeline template
                const template = timelineTemplates[caseType] || timelineTemplates.property;
                
                // Update stats
                document.getElementById('totalDuration').textContent = template.duration;
                document.getElementById('totalStages').textContent = template.stages.length;
                
                // Calculate current stage and progress
                const completedStages = template.stages.filter(stage => stage.status === 'completed').length;
                const currentStageNum = completedStages + 1;
                const progressRate = Math.round((completedStages / template.stages.length) * 100);
                
                document.getElementById('currentStage').textContent = currentStageNum;
                document.getElementById('completionRate').textContent = progressRate + '%';

                // Generate timeline items
                const timelineItems = document.getElementById('timelineItems');
                timelineItems.innerHTML = '';

                template.stages.forEach((stage, index) => {
                    const timelineItem = createTimelineItem(stage, index + 1);
                    timelineItems.appendChild(timelineItem);
                });

                // Show timeline
                emptyState.style.display = 'none';
                timelineContainer.classList.add('show');

                // Reset button
                generateBtn.disabled = false;
                generateBtn.innerHTML = '<svg class="btn-icon" viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>Regenerate Timeline';
            }, 3000);
        }

        // Create timeline item HTML
        function createTimelineItem(stage, stageNumber) {
            const item = document.createElement('div');
            item.className = `timeline-item ${stage.status}`;
            
            const phaseClass = `phase-${stage.phase}`;
            const actionTags = stage.actions.map(action => {
                const tagClass = action.includes('Important') || action.includes('Legal') ? 'important' : 
                                action.includes('Document') || action.includes('Evidence') ? 'document' : '';
                return `<span class="action-tag ${tagClass}">${action}</span>`;
            }).join('');

            item.innerHTML = `
                <div class="timeline-header-item">
                    <div>
                        <div class="timeline-title">Stage ${stageNumber}: ${stage.title}</div>
                        <div class="timeline-date">${stage.date}</div>
                    </div>
                    <span class="timeline-phase ${phaseClass}">${stage.phase.charAt(0).toUpperCase() + stage.phase.slice(1)}</span>
                </div>
                <div class="timeline-description">${stage.description}</div>
                <div class="timeline-actions">${actionTags}</div>
                <div class="timeline-duration">Expected Duration: ${stage.duration}</div>
            `;

            return item;
        }

        // Check if timeline should be auto-generated
        document.addEventListener('DOMContentLoaded', function() {
            // Auto-generate if case details exist
            const caseDetails = JSON.parse(localStorage.getItem('caseDetails') || '{}');
            if (caseDetails.caseSummary && caseDetails.caseSummary.length > 100) {
                // Auto-generate timeline after a short delay
                setTimeout(() => {
                    generateTimeline();
                }, 1000);
            }
        });
    </script>
</body>
</html>