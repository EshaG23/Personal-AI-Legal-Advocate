<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document Assistant - Personal AI Legal Advocate</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #0f172a;
            color: white;
            overflow-x: hidden;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar Styles */
        .sidebar {
            width: 250px;
            background-color: #1e293b;
            border-right: 1px solid #334155;
            padding: 1rem 0;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }

        .logo {
            display: flex;
            align-items: center;
            padding: 0 1rem 1rem;
            margin-bottom: 1rem;
            border-bottom: 1px solid #334155;
        }

        .logo-icon {
            width: 24px;
            height: 24px;
            fill: #06b6d4;
            margin-right: 0.5rem;
        }

        .logo-text {
            font-size: 1.125rem;
            font-weight: 600;
            color: white;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            color: #94a3b8;
            text-decoration: none;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }

        .nav-item:hover {
            background-color: #334155;
            color: white;
        }

        .nav-item.active {
            background-color: #1e40af;
            color: white;
            border-left-color: #06b6d4;
        }

        .nav-icon {
            width: 20px;
            height: 20px;
            margin-right: 0.75rem;
            fill: currentColor;
        }

        /* Mobile menu toggle */
        .mobile-menu-toggle {
            display: none;
            position: fixed;
            top: 1rem;
            left: 1rem;
            z-index: 1000;
            background-color: #1e40af;
            color: white;
            border: none;
            border-radius: 0.375rem;
            padding: 0.5rem;
            cursor: pointer;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 250px;
            padding: 2rem;
        }

        .header {
            margin-bottom: 2rem;
        }

        .header h1 {
            font-size: 1.875rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
        }

        .header-icon {
            width: 24px;
            height: 24px;
            fill: #06b6d4;
            margin-right: 0.75rem;
        }

        .header p {
            color: #94a3b8;
        }

        /* Template Selection */
        .template-selection {
            margin-bottom: 2rem;
        }

        .section-title {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: white;
        }

        .template-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .template-card {
            background-color: #1e293b;
            border: 1px solid #334155;
            border-radius: 0.75rem;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .template-card:hover {
            background-color: #334155;
            border-color: #06b6d4;
            transform: translateY(-2px);
        }

        .template-card.selected {
            background-color: #1e40af;
            border-color: #06b6d4;
        }

        .template-icon {
            width: 32px;
            height: 32px;
            fill: #06b6d4;
            margin-bottom: 1rem;
        }

        .template-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: white;
        }

        .template-description {
            font-size: 0.875rem;
            color: #94a3b8;
            line-height: 1.4;
            margin-bottom: 1rem;
        }

        .template-complexity {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-weight: 500;
        }

        .complexity-basic {
            background-color: rgba(16, 185, 129, 0.2);
            color: #6ee7b7;
        }

        .complexity-intermediate {
            background-color: rgba(245, 158, 11, 0.2);
            color: #fbbf24;
        }

        .complexity-advanced {
            background-color: rgba(239, 68, 68, 0.2);
            color: #fca5a5;
        }

        .template-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .template-tag {
            font-size: 0.75rem;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            background-color: #374151;
            color: #d1d5db;
        }

        /* Empty State */
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 300px;
            text-align: center;
        }

        .empty-icon {
            width: 64px;
            height: 64px;
            fill: #64748b;
            margin-bottom: 1rem;
        }

        .empty-state h2 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #94a3b8;
        }

        .empty-state p {
            color: #64748b;
            max-width: 400px;
        }

        /* Document Generator */
        .document-generator {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .document-generator.show {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .generator-header {
            background-color: #1e293b;
            border: 1px solid #334155;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .generator-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: white;
        }

        .generator-subtitle {
            color: #94a3b8;
            margin-bottom: 1rem;
        }

        .generator-progress {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .progress-steps {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex: 1;
        }

        .progress-step {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
            font-weight: 600;
            transition: all 0.2s;
        }

        .progress-step.completed {
            background-color: #10b981;
            color: white;
        }

        .progress-step.active {
            background-color: #06b6d4;
            color: white;
        }

        .progress-step.pending {
            background-color: #374151;
            color: #9ca3af;
        }

        .progress-connector {
            flex: 1;
            height: 2px;
            background-color: #374151;
            position: relative;
        }

        .progress-connector.completed {
            background-color: #10b981;
        }

        .step-label {
            font-size: 0.75rem;
            color: #94a3b8;
            margin-top: 0.25rem;
        }

        /* Form Sections */
        .form-section {
            background-color: #1e293b;
            border: 1px solid #334155;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .form-header {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }

        .form-icon {
            width: 20px;
            height: 20px;
            fill: #06b6d4;
            margin-right: 0.75rem;
        }

        .form-title {
            font-size: 1rem;
            font-weight: 600;
            color: white;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: #d1d5db;
            margin-bottom: 0.5rem;
        }

        .form-input {
            width: 100%;
            background-color: #0f172a;
            border: 1px solid #334155;
            border-radius: 0.5rem;
            padding: 0.75rem;
            color: white;
            font-family: inherit;
            font-size: 0.875rem;
            transition: border-color 0.2s;
        }

        .form-input:focus {
            outline: none;
            border-color: #06b6d4;
            box-shadow: 0 0 0 3px rgba(6, 182, 212, 0.1);
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem;
        }

        .form-help {
            font-size: 0.75rem;
            color: #94a3b8;
            margin-top: 0.25rem;
        }

        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
        }

        .checkbox-input {
            width: 16px;
            height: 16px;
            margin-right: 0.5rem;
            accent-color: #06b6d4;
        }

        .checkbox-label {
            font-size: 0.875rem;
            color: #d1d5db;
        }

        /* AI Suggestions */
        .ai-suggestions {
            background-color: #0f172a;
            border: 1px solid #334155;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-top: 1rem;
        }

        .suggestions-header {
            display: flex;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .suggestions-icon {
            width: 16px;
            height: 16px;
            fill: #06b6d4;
            margin-right: 0.5rem;
        }

        .suggestions-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: #06b6d4;
        }

        .suggestion-item {
            background-color: rgba(6, 182, 212, 0.1);
            border-radius: 0.25rem;
            padding: 0.5rem;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
            color: #d1d5db;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .suggestion-item:hover {
            background-color: rgba(6, 182, 212, 0.2);
        }

        /* Document Preview */
        .document-preview {
            background-color: #1e293b;
            border: 1px solid #334155;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .preview-title {
            font-size: 1rem;
            font-weight: 600;
            color: white;
        }

        .preview-actions {
            display: flex;
            gap: 0.5rem;
        }

        .preview-btn {
            background-color: #374151;
            color: #d1d5db;
            border: none;
            border-radius: 0.375rem;
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .preview-btn:hover {
            background-color: #4b5563;
        }

        .preview-btn.primary {
            background-color: #06b6d4;
            color: white;
        }

        .preview-btn.primary:hover {
            background-color: #0891b2;
        }

        .document-content {
            background-color: white;
            color: #1f2937;
            border-radius: 0.5rem;
            padding: 2rem;
            font-family: 'Times New Roman', serif;
            line-height: 1.6;
            min-height: 400px;
            max-height: 600px;
            overflow-y: auto;
        }

        .document-content h1 {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 1rem;
            text-align: center;
        }

        .document-content h2 {
            font-size: 1.25rem;
            font-weight: bold;
            margin: 1.5rem 0 0.75rem;
        }

        .document-content p {
            margin-bottom: 1rem;
        }

        .document-content .signature-line {
            border-bottom: 1px solid #000;
            width: 200px;
            margin: 2rem 0 0.5rem;
        }

        .document-content .date-line {
            border-bottom: 1px solid #000;
            width: 150px;
            display: inline-block;
            margin-left: 1rem;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 2rem;
        }

        .back-btn {
            background-color: #374151;
            color: #d1d5db;
            border: none;
            border-radius: 0.5rem;
            padding: 0.75rem 1.5rem;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
        }

        .back-btn:hover {
            background-color: #4b5563;
        }

        .generate-btn {
            background-color: #06b6d4;
            color: white;
            border: none;
            border-radius: 0.5rem;
            padding: 0.75rem 1.5rem;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
        }

        .generate-btn:hover {
            background-color: #0891b2;
        }

        .generate-btn:disabled {
            background-color: #374151;
            cursor: not-allowed;
        }

        .btn-icon {
            width: 16px;
            height: 16px;
            fill: currentColor;
            margin-right: 0.5rem;
        }

        /* Loading Spinner */
        .loading-spinner {
            width: 16px;
            height: 16px;
            border: 2px solid #374151;
            border-top: 2px solid #06b6d4;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .mobile-menu-toggle {
                display: block;
            }

            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
                z-index: 999;
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
                padding: 1rem;
                padding-top: 4rem;
            }

            .template-grid {
                grid-template-columns: 1fr;
            }

            .progress-steps {
                flex-direction: column;
                gap: 0.25rem;
            }

            .progress-connector {
                display: none;
            }

            .action-buttons {
                flex-direction: column;
                gap: 1rem;
            }

            .preview-actions {
                flex-direction: column;
                gap: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
        </svg>
    </button>

    <div class="container">
        <!-- Sidebar -->
        <nav class="sidebar" id="sidebar">
            <div class="logo">
                <svg class="logo-icon" viewBox="0 0 24 24">
                    <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 7V9C15 10.1 15.9 11 17 11V20C17 21.1 16.1 22 15 22H9C7.9 22 7 21.1 7 20V11C8.1 11 9 10.1 9 9V7H3V9C3 10.1 3.9 11 5 11V20C5 21.1 5.9 22 7 22H17C18.1 22 19 21.1 19 20V11C20.1 11 21 10.1 21 9Z"/>
                </svg>
                <span class="logo-text">PALA</span>
            </div>

            <a href="dashboard.html" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
                </svg>
                Dashboard
            </a>

            <a href="ai-chat-advocate.html" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/>
                </svg>
                AI Chat Advocate
            </a>

            <a href="case-details-with-summary.html" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 2 2h8c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-5 2h6v2H9V4zm3 17c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>
                </svg>
                Case Details
            </a>

            <a href="case-timeline.html" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/>
                    <path d="M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
                </svg>
                Case Timeline
            </a>

            <a href="strategy-risks.html" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M9 11H7v6h2v-6zm4 0h-2v6h2v-6zm4 0h-2v6h2v-6zm2.5-9H19v2h-1.5v17.5c0 .83-.67 1.5-1.5 1.5h-9c-.83 0-1.5-.67-1.5-1.5V4H4V2h4.5l1-1h5l1 1H20v2z"/>
                </svg>
                Strategy & Risks
            </a>

            <a href="document-assistant.html" class="nav-item active">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 2 2h8c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-5 2h6v2H9V4zm3 17c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>
                </svg>
                Document Assistant
            </a>

            <a href="communication-coach.html" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/>
                </svg>
                Communication Coach
            </a>

            <a href="#" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                </svg>
                Private Journal
            </a>

            <a href="#" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M20.5 3l-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM10 5.47l4 1.4v11.66l-4-1.4V5.47z"/>
                </svg>
                Resource Finder
            </a>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <div class="header">
                <h1>
                    <svg class="header-icon" viewBox="0 0 24 24">
                        <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 2 2h8c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-5 2h6v2H9V4zm3 17c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>
                    </svg>
                    Document Assistant
                </h1>
                <p>Generate draft documents based on your case details.</p>
            </div>

            <!-- Template Selection -->
            <div class="template-selection" id="templateSelection">
                <h2 class="section-title">Select a document template</h2>
                <div class="template-grid">
                    <div class="template-card" onclick="selectTemplate('statement-facts')">
                        <span class="template-complexity complexity-basic">Basic</span>
                        <svg class="template-icon" viewBox="0 0 24 24">
                            <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 2 2h8c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-5 2h6v2H9V4zm3 17c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>
                        </svg>
                        <div class="template-title">Statement of Facts</div>
                        <div class="template-description">Create a clear, chronological statement of the facts relevant to your case.</div>
                        <div class="template-tags">
                            <span class="template-tag">Litigation</span>
                            <span class="template-tag">Evidence</span>
                        </div>
                    </div>

                    <div class="template-card" onclick="selectTemplate('evidence-request')">
                        <span class="template-complexity complexity-intermediate">Intermediate</span>
                        <svg class="template-icon" viewBox="0 0 24 24">
                            <path d="M20 6h-2.18c.11-.31.18-.65.18-1a2.996 2.996 0 0 0-5.5-1.65l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1z"/>
                        </svg>
                        <div class="template-title">Request for Evidence</div>
                        <div class="template-description">Formal request for documents, records, or other evidence from opposing parties.</div>
                        <div class="template-tags">
                            <span class="template-tag">Discovery</span>
                            <span class="template-tag">Evidence</span>
                        </div>
                    </div>

                    <div class="template-card" onclick="selectTemplate('cease-desist')">
                        <span class="template-complexity complexity-intermediate">Intermediate</span>
                        <svg class="template-icon" viewBox="0 0 24 24">
                            <path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/>
                        </svg>
                        <div class="template-title">Cease and Desist Letter</div>
                        <div class="template-description">Demand that someone stop engaging in specific harmful or illegal activities.</div>
                        <div class="template-tags">
                            <span class="template-tag">Warning</span>
                            <span class="template-tag">Harassment</span>
                        </div>
                    </div>

                    <div class="template-card" onclick="selectTemplate('complaint-letter')">
                        <span class="template-complexity complexity-basic">Basic</span>
                        <svg class="template-icon" viewBox="0 0 24 24">
                            <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                        </svg>
                        <div class="template-title">Formal Complaint Letter</div>
                        <div class="template-description">Professional complaint letter to businesses, organizations, or authorities.</div>
                        <div class="template-tags">
                            <span class="template-tag">Consumer</span>
                            <span class="template-tag">Service</span>
                        </div>
                    </div>

                    <div class="template-card" onclick="selectTemplate('lawyer-questions')">
                        <span class="template-complexity complexity-basic">Basic</span>
                        <svg class="template-icon" viewBox="0 0 24 24">
                            <path d="M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/>
                        </svg>
                        <div class="template-title">Questions for Initial Lawyer Consultation</div>
                        <div class="template-description">Comprehensive list of questions to ask during your first meeting with a lawyer.</div>
                        <div class="template-tags">
                            <span class="template-tag">Consultation</span>
                            <span class="template-tag">Preparation</span>
                        </div>
                    </div>

                    <div class="template-card" onclick="selectTemplate('deposition-checklist')">
                        <span class="template-complexity complexity-advanced">Advanced</span>
                        <svg class="template-icon" viewBox="0 0 24 24">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                        </svg>
                        <div class="template-title">Deposition Preparation Checklist</div>
                        <div class="template-description">Complete checklist to prepare for giving or attending a deposition.</div>
                        <div class="template-tags">
                            <span class="template-tag">Deposition</span>
                            <span class="template-tag">Preparation</span>
                        </div>
                    </div>

                    <div class="template-card" onclick="selectTemplate('settlement-proposal')">
                        <span class="template-complexity complexity-advanced">Advanced</span>
                        <svg class="template-icon" viewBox="0 0 24 24">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                        <div class="template-title">Settlement Proposal</div>
                        <div class="template-description">Professional settlement offer with terms and conditions for dispute resolution.</div>
                        <div class="template-tags">
                            <span class="template-tag">Settlement</span>
                            <span class="template-tag">Negotiation</span>
                        </div>
                    </div>

                    <div class="template-card" onclick="selectTemplate('affidavit')">
                        <span class="template-complexity complexity-advanced">Advanced</span>
                        <svg class="template-icon" viewBox="0 0 24 24">
                            <path d="M9 11H7v6h2v-6zm4 0h-2v6h2v-6zm4 0h-2v6h2v-6zm2.5-9H19v2h-1.5v17.5c0 .83-.67 1.5-1.5 1.5h-9c-.83 0-1.5-.67-1.5-1.5V4H4V2h4.5l1-1h5l1 1H20v2z"/>
                        </svg>
                        <div class="template-title">Affidavit</div>
                        <div class="template-description">Sworn written statement of facts for use as evidence in legal proceedings.</div>
                        <div class="template-tags">
                            <span class="template-tag">Sworn Statement</span>
                            <span class="template-tag">Evidence</span>
                        </div>
                    </div>

                    <div class="template-card" onclick="selectTemplate('demand-letter')">
                        <span class="template-complexity complexity-intermediate">Intermediate</span>
                        <svg class="template-icon" viewBox="0 0 24 24">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                        </svg>
                        <div class="template-title">Demand Letter</div>
                        <div class="template-description">Formal demand for payment, action, or resolution before legal proceedings.</div>
                        <div class="template-tags">
                            <span class="template-tag">Payment</span>
                            <span class="template-tag">Demand</span>
                        </div>
                    </div>
                </div>

                <!-- Empty State -->
                <div class="empty-state">
                    <svg class="empty-icon" viewBox="0 0 24 24">
                        <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 2 2h8c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-5 2h6v2H9V4zm3 17c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>
                    </svg>
                    <h2>Ready to create documents?</h2>
                    <p>Select a template above to generate professional legal documents tailored to your case.</p>
                </div>
            </div>

            <!-- Document Generator -->
            <div class="document-generator" id="documentGenerator">
                <!-- Generator Header -->
                <div class="generator-header">
                    <div class="generator-title" id="generatorTitle">Statement of Facts</div>
                    <div class="generator-subtitle" id="generatorSubtitle">Provide the information below to generate your document</div>
                    <div class="generator-progress">
                        <div class="progress-steps">
                            <div class="progress-step completed" id="step1">1</div>
                            <div class="progress-connector completed"></div>
                            <div class="progress-step active" id="step2">2</div>
                            <div class="progress-connector"></div>
                            <div class="progress-step pending" id="step3">3</div>
                        </div>
                    </div>
                </div>

                <!-- Form Sections -->
                <div id="formSections">
                    <!-- Dynamic form sections will be populated here -->
                </div>

                <!-- Document Preview -->
                <div class="document-preview" id="documentPreview" style="display: none;">
                    <div class="preview-header">
                        <div class="preview-title">Document Preview</div>
                        <div class="preview-actions">
                            <button class="preview-btn" onclick="editDocument()">Edit</button>
                            <button class="preview-btn" onclick="downloadDocument()">Download PDF</button>
                            <button class="preview-btn" onclick="downloadDocument('docx')">Download Word</button>
                            <button class="preview-btn primary" onclick="saveDocument()">Save Document</button>
                        </div>
                    </div>
                    <div class="document-content" id="documentContent">
                        <!-- Generated document content will appear here -->
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="action-buttons">
                    <button class="back-btn" onclick="goBackToTemplates()">
                        <svg class="btn-icon" viewBox="0 0 24 24">
                            <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                        </svg>
                        Back to Templates
                    </button>
                    <button class="generate-btn" onclick="generateDocument()" id="generateBtn">
                        <svg class="btn-icon" viewBox="0 0 24 24">
                            <path d="M9 11H7v6h2v-6zm4 0h-2v6h2v-6zm4 0h-2v6h2v-6zm2.5-9H19v2h-1.5v17.5c0 .83-.67 1.5-1.5 1.5h-9c-.83 0-1.5-.67-1.5-1.5V4H4V2h4.5l1-1h5l1 1H20v2z"/>
                        </svg>
                        Generate Document
                    </button>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Mobile menu toggle
        function toggleMobileMenu() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('open');
        }

        // Close mobile menu when clicking outside
        document.addEventListener('click', function(event) {
            const sidebar = document.getElementById('sidebar');
            const toggle = document.querySelector('.mobile-menu-toggle');
            
            if (!sidebar.contains(event.target) && !toggle.contains(event.target)) {
                sidebar.classList.remove('open');
            }
        });

        // Document templates configuration
        const documentTemplates = {
            'statement-facts': {
                title: 'Statement of Facts',
                subtitle: 'Create a clear, chronological statement of facts',
                sections: [
                    {
                        title: 'Basic Information',
                        icon: 'user',
                        fields: [
                            { name: 'fullName', label: 'Your Full Name', type: 'text', required: true },
                            { name: 'address', label: 'Your Address', type: 'textarea', required: true },
                            { name: 'phone', label: 'Phone Number', type: 'tel', required: true },
                            { name: 'email', label: 'Email Address', type: 'email', required: true }
                        ]
                    },
                    {
                        title: 'Case Information',
                        icon: 'case',
                        fields: [
                            { name: 'caseTitle', label: 'Case Title/Matter', type: 'text', required: true },
                            { name: 'dateOfIncident', label: 'Date of Incident', type: 'date', required: true },
                            { name: 'location', label: 'Location of Incident', type: 'text', required: true },
                            { name: 'parties', label: 'Other Parties Involved', type: 'textarea', help: 'List all other parties involved in this matter' }
                        ]
                    },
                    {
                        title: 'Statement of Facts',
                        icon: 'document',
                        fields: [
                            { name: 'factualBackground', label: 'Factual Background', type: 'textarea', required: true, help: 'Provide a chronological account of the relevant facts' },
                            { name: 'keyEvents', label: 'Key Events', type: 'textarea', required: true, help: 'List the most important events in chronological order' },
                            { name: 'witnesses', label: 'Witnesses', type: 'textarea', help: 'List any witnesses and their contact information' },
                            { name: 'evidence', label: 'Evidence Available', type: 'textarea', help: 'Describe any documents, photos, or other evidence you have' }
                        ]
                    }
                ]
            },
            'evidence-request': {
                title: 'Request for Evidence',
                subtitle: 'Formal request for documents and evidence',
                sections: [
                    {
                        title: 'Request Details',
                        icon: 'search',
                        fields: [
                            { name: 'recipientName', label: 'Recipient Name', type: 'text', required: true },
                            { name: 'recipientAddress', label: 'Recipient Address', type: 'textarea', required: true },
                            { name: 'caseReference', label: 'Case Reference', type: 'text', required: true },
                            { name: 'requestDate', label: 'Request Date', type: 'date', required: true }
                        ]
                    },
                    {
                        title: 'Evidence Requested',
                        icon: 'document',
                        fields: [
                            { name: 'documentsRequested', label: 'Documents Requested', type: 'textarea', required: true, help: 'List specific documents you are requesting' },
                            { name: 'timeFrame', label: 'Time Frame', type: 'text', help: 'Specify the time period for the requested documents' },
                            { name: 'legalBasis', label: 'Legal Basis for Request', type: 'textarea', help: 'Explain the legal basis for your request' },
                            { name: 'deadline', label: 'Response Deadline', type: 'date', required: true }
                        ]
                    }
                ]
            },
            'cease-desist': {
                title: 'Cease and Desist Letter',
                subtitle: 'Demand to stop harmful or illegal activities',
                sections: [
                    {
                        title: 'Recipient Information',
                        icon: 'user',
                        fields: [
                            { name: 'recipientName', label: 'Recipient Name', type: 'text', required: true },
                            { name: 'recipientAddress', label: 'Recipient Address', type: 'textarea', required: true },
                            { name: 'relationshipToRecipient', label: 'Your Relationship to Recipient', type: 'text', help: 'e.g., former employee, neighbor, business partner' }
                        ]
                    },
                    {
                        title: 'Problematic Conduct',
                        icon: 'warning',
                        fields: [
                            { name: 'conductDescription', label: 'Description of Conduct', type: 'textarea', required: true, help: 'Describe the specific behavior you want stopped' },
                            { name: 'conductDates', label: 'Dates of Conduct', type: 'textarea', help: 'When did this conduct occur?' },
                            { name: 'harmCaused', label: 'Harm Caused', type: 'textarea', required: true, help: 'Explain how this conduct has harmed you' },
                            { name: 'legalViolation', label: 'Legal Violation', type: 'textarea', help: 'What laws or rights are being violated?' }
                        ]
                    },
                    {
                        title: 'Demands and Consequences',
                        icon: 'gavel',
                        fields: [
                            { name: 'specificDemands', label: 'Specific Demands', type: 'textarea', required: true, help: 'What exactly do you want them to stop doing?' },
                            { name: 'deadline', label: 'Compliance Deadline', type: 'date', required: true },
                            { name: 'consequences', label: 'Consequences of Non-Compliance', type: 'textarea', help: 'What legal action will you take if they don\'t comply?' }
                        ]
                    }
                ]
            },
            'complaint-letter': {
                title: 'Formal Complaint Letter',
                subtitle: 'Professional complaint to businesses or authorities',
                sections: [
                    {
                        title: 'Complaint Details',
                        icon: 'alert',
                        fields: [
                            { name: 'recipientOrganization', label: 'Organization/Company', type: 'text', required: true },
                            { name: 'recipientAddress', label: 'Address', type: 'textarea', required: true },
                            { name: 'incidentDate', label: 'Date of Incident', type: 'date', required: true },
                            { name: 'referenceNumber', label: 'Reference Number', type: 'text', help: 'Order number, account number, etc.' }
                        ]
                    },
                    {
                        title: 'Complaint Description',
                        icon: 'document',
                        fields: [
                            { name: 'complaintSummary', label: 'Complaint Summary', type: 'textarea', required: true, help: 'Brief summary of your complaint' },
                            { name: 'detailedDescription', label: 'Detailed Description', type: 'textarea', required: true, help: 'Detailed account of what happened' },
                            { name: 'previousAttempts', label: 'Previous Resolution Attempts', type: 'textarea', help: 'What have you already tried to resolve this?' },
                            { name: 'desiredResolution', label: 'Desired Resolution', type: 'textarea', required: true, help: 'What outcome are you seeking?' }
                        ]
                    }
                ]
            },
            'lawyer-questions': {
                title: 'Questions for Initial Lawyer Consultation',
                subtitle: 'Comprehensive consultation preparation',
                sections: [
                    {
                        title: 'Case Assessment Questions',
                        icon: 'question',
                        fields: [
                            { name: 'caseType', label: 'Type of Legal Matter', type: 'select', required: true, 
                              options: ['Personal Injury', 'Employment', 'Family Law', 'Property Dispute', 'Contract Dispute', 'Criminal Defense', 'Other'] },
                            { name: 'caseStrength', label: 'Questions about Case Strength', type: 'textarea', 
                              value: '• What is your initial assessment of my case?\n• What are the strengths and weaknesses?\n• What is the likelihood of success?\n• What are the potential outcomes?' },
                            { name: 'legalStrategy', label: 'Questions about Legal Strategy', type: 'textarea',
                              value: '• What is your recommended approach?\n• What are the next steps?\n• How long will this process take?\n• What are the alternatives to litigation?' }
                        ]
                    },
                    {
                        title: 'Practical Questions',
                        icon: 'clock',
                        fields: [
                            { name: 'timelineQuestions', label: 'Timeline Questions', type: 'textarea',
                              value: '• How long will this case take?\n• What are the key deadlines?\n• When can I expect updates?\n• What factors could delay the process?' },
                            { name: 'costQuestions', label: 'Cost Questions', type: 'textarea',
                              value: '• What are your fees?\n• How do you bill for your services?\n• What additional costs should I expect?\n• Do you offer payment plans?' },
                            { name: 'communicationQuestions', label: 'Communication Questions', type: 'textarea',
                              value: '• How often will you update me?\n• What is the best way to reach you?\n• Who else will work on my case?\n• How quickly do you respond to calls/emails?' }
                        ]
                    }
                ]
            },
            'deposition-checklist': {
                title: 'Deposition Preparation Checklist',
                subtitle: 'Complete preparation guide for depositions',
                sections: [
                    {
                        title: 'Pre-Deposition Preparation',
                        icon: 'checklist',
                        fields: [
                            { name: 'documentReview', label: 'Document Review Checklist', type: 'textarea',
                              value: '☐ Review all case documents\n☐ Review your previous statements\n☐ Review relevant contracts/agreements\n☐ Review correspondence with other parties\n☐ Organize documents chronologically' },
                            { name: 'factualPreparation', label: 'Factual Preparation', type: 'textarea',
                              value: '☐ Create timeline of key events\n☐ Refresh memory on important dates\n☐ Review names and roles of key people\n☐ Prepare for questions about your background\n☐ Practice explaining technical terms simply' },
                            { name: 'legalPreparation', label: 'Legal Preparation', type: 'textarea',
                              value: '☐ Meet with your attorney\n☐ Understand the purpose of the deposition\n☐ Review likely questions\n☐ Practice answering difficult questions\n☐ Understand objection procedures' }
                        ]
                    },
                    {
                        title: 'Day of Deposition',
                        icon: 'calendar',
                        fields: [
                            { name: 'personalPreparation', label: 'Personal Preparation', type: 'textarea',
                              value: '☐ Get adequate rest the night before\n☐ Dress professionally\n☐ Arrive early\n☐ Bring identification\n☐ Bring any required documents' },
                            { name: 'duringDeposition', label: 'During Deposition Guidelines', type: 'textarea',
                              value: '☐ Listen carefully to each question\n☐ Answer only what is asked\n☐ Tell the truth\n☐ Say "I don\'t know" if you don\'t know\n☐ Take breaks when needed\n☐ Stay calm and professional' }
                        ]
                    }
                ]
            }
        };

        let currentTemplate = null;
        let currentStep = 1;

        // Select a template
        function selectTemplate(templateId) {
            currentTemplate = templateId;
            currentStep = 1;
            
            // Hide template selection
            document.getElementById('templateSelection').style.display = 'none';
            
            // Show document generator
            const generator = document.getElementById('documentGenerator');
            generator.classList.add('show');
            
            // Load template content
            loadTemplateContent();
        }

        // Load template content
        function loadTemplateContent() {
            const template = documentTemplates[currentTemplate];
            
            // Update header
            document.getElementById('generatorTitle').textContent = template.title;
            document.getElementById('generatorSubtitle').textContent = template.subtitle;
            
            // Load form sections
            loadFormSections(template.sections);
            
            // Update progress
            updateProgress();
        }

        // Load form sections
        function loadFormSections(sections) {
            const container = document.getElementById('formSections');
            container.innerHTML = '';
            
            sections.forEach((section, index) => {
                const sectionDiv = document.createElement('div');
                sectionDiv.className = 'form-section';
                
                let fieldsHtml = '';
                section.fields.forEach(field => {
                    fieldsHtml += generateFieldHtml(field);
                });
                
                sectionDiv.innerHTML = `
                    <div class="form-header">
                        <svg class="form-icon" viewBox="0 0 24 24">
                            ${getIconPath(section.icon)}
                        </svg>
                        <div class="form-title">${section.title}</div>
                    </div>
                    ${fieldsHtml}
                `;
                
                container.appendChild(sectionDiv);
            });
            
            // Add AI suggestions to text areas
            addAISuggestions();
        }

        // Generate field HTML
        function generateFieldHtml(field) {
            let inputHtml = '';
            const required = field.required ? 'required' : '';
            const value = field.value || '';
            
            switch (field.type) {
                case 'textarea':
                    inputHtml = `<textarea class="form-input form-textarea" name="${field.name}" placeholder="Enter ${field.label.toLowerCase()}..." ${required}>${value}</textarea>`;
                    break;
                case 'select':
                    const options = field.options.map(opt => `<option value="${opt}">${opt}</option>`).join('');
                    inputHtml = `<select class="form-input form-select" name="${field.name}" ${required}><option value="">Select ${field.label}</option>${options}</select>`;
                    break;
                default:
                    inputHtml = `<input type="${field.type}" class="form-input" name="${field.name}" placeholder="Enter ${field.label.toLowerCase()}..." ${required} value="${value}">`;
            }
            
            const helpText = field.help ? `<div class="form-help">${field.help}</div>` : '';
            
            return `
                <div class="form-group">
                    <label class="form-label">${field.label}${field.required ? ' *' : ''}</label>
                    ${inputHtml}
                    ${helpText}
                </div>
            `;
        }

        // Get icon path for different icons
        function getIconPath(iconName) {
            const icons = {
                user: 'M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z',
                case: 'M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 2 2h8c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-5 2h6v2H9V4zm3 17c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z',
                document: 'M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 2 2h8c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-5 2h6v2H9V4zm3 17c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z',
                search: 'M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z',
                warning: 'M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z',
                gavel: 'M9.5 11.5c0 .83.67 1.5 1.5 1.5h2c.83 0 1.5-.67 1.5-1.5v-1c0-.83-.67-1.5-1.5-1.5h-2c-.83 0-1.5.67-1.5 1.5v1zm-1 4.5h7v2h-7v-2z',
                alert: 'M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z',
                question: 'M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z',
                checklist: 'M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z',
                calendar: 'M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z',
                clock: 'M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z'
            };
            return icons[iconName] || icons.document;
        }

        // Add AI suggestions to form fields
        function addAISuggestions() {
            const caseDetails = JSON.parse(localStorage.getItem('caseDetails') || '{}');
            
            // Add suggestions based on case details
            if (caseDetails.caseType || caseDetails.caseSummary) {
                const textareas = document.querySelectorAll('textarea');
                textareas.forEach(textarea => {
                    if (textarea.name === 'factualBackground' || textarea.name === 'detailedDescription') {
                        addSuggestionBox(textarea, generateContentSuggestions(textarea.name, caseDetails));
                    }
                });
            }
        }

        // Add suggestion box to a field
        function addSuggestionBox(field, suggestions) {
            if (suggestions.length === 0) return;
            
            const suggestionBox = document.createElement('div');
            suggestionBox.className = 'ai-suggestions';
            suggestionBox.innerHTML = `
                <div class="suggestions-header">
                    <svg class="suggestions-icon" viewBox="0 0 24 24">
                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>
                    <div class="suggestions-title">AI Suggestions</div>
                </div>
                ${suggestions.map(suggestion => 
                    `<div class="suggestion-item" onclick="applySuggestion('${field.name}', '${suggestion.replace(/'/g, "\\'")}')">
                        ${suggestion}
                    </div>`
                ).join('')}
            `;
            
            field.parentNode.appendChild(suggestionBox);
        }

        // Generate content suggestions based on case details
        function generateContentSuggestions(fieldName, caseDetails) {
            const suggestions = [];
            
            if (fieldName === 'factualBackground' && caseDetails.caseSummary) {
                suggestions.push(
                    `On ${new Date().toLocaleDateString()}, the following events occurred...`,
                    `The incident began when...`,
                    `As a result of the actions described above...`
                );
            }
            
            if (fieldName === 'detailedDescription') {
                suggestions.push(
                    `I am writing to formally complain about...`,
                    `This matter has caused significant inconvenience because...`,
                    `I have attempted to resolve this matter by...`
                );
            }
            
            return suggestions;
        }

        // Apply suggestion to field
        function applySuggestion(fieldName, suggestion) {
            const field = document.querySelector(`[name="${fieldName}"]`);
            if (field) {
                if (field.value) {
                    field.value += '\n\n' + suggestion;
                } else {
                    field.value = suggestion;
                }
                field.focus();
            }
        }

        // Update progress indicator
        function updateProgress() {
            const steps = ['step1', 'step2', 'step3'];
            steps.forEach((stepId, index) => {
                const step = document.getElementById(stepId);
                if (index + 1 < currentStep) {
                    step.className = 'progress-step completed';
                } else if (index + 1 === currentStep) {
                    step.className = 'progress-step active';
                } else {
                    step.className = 'progress-step pending';
                }
            });
        }

        // Generate document
        function generateDocument() {
            const generateBtn = document.getElementById('generateBtn');
            generateBtn.disabled = true;
            generateBtn.innerHTML = '<div class="loading-spinner"></div>Generating Document...';

            // Collect form data
            const formData = collectFormData();
            
            // Validate required fields
            if (!validateFormData(formData)) {
                generateBtn.disabled = false;
                generateBtn.innerHTML = '<svg class="btn-icon" viewBox="0 0 24 24"><path d="M9 11H7v6h2v-6zm4 0h-2v6h2v-6zm4 0h-2v6h2v-6zm2.5-9H19v2h-1.5v17.5c0 .83-.67 1.5-1.5 1.5h-9c-.83 0-1.5-.67-1.5-1.5V4H4V2h4.5l1-1h5l1 1H20v2z"/></svg>Generate Document';
                return;
            }

            // Simulate document generation
            setTimeout(() => {
                const documentContent = generateDocumentContent(currentTemplate, formData);
                displayDocument(documentContent);
                
                generateBtn.disabled = false;
                generateBtn.innerHTML = '<svg class="btn-icon" viewBox="0 0 24 24"><path d="M9 11H7v6h2v-6zm4 0h-2v6h2v-6zm4 0h-2v6h2v-6zm2.5-9H19v2h-1.5v17.5c0 .83-.67 1.5-1.5 1.5h-9c-.83 0-1.5-.67-1.5-1.5V4H4V2h4.5l1-1h5l1 1H20v2z"/></svg>Regenerate Document';
                
                currentStep = 3;
                updateProgress();
            }, 3000);
        }

        // Collect form data
        function collectFormData() {
            const formData = {};
            const inputs = document.querySelectorAll('.form-input');
            
            inputs.forEach(input => {
                if (input.name) {
                    formData[input.name] = input.value;
                }
            });
            
            return formData;
        }

        // Validate form data
        function validateFormData(formData) {
            const template = documentTemplates[currentTemplate];
            let isValid = true;
            
            template.sections.forEach(section => {
                section.fields.forEach(field => {
                    if (field.required && !formData[field.name]) {
                        alert(`Please fill in the required field: ${field.label}`);
                        isValid = false;
                        return false;
                    }
                });
            });
            
            return isValid;
        }

        // Generate document content based on template and form data
        function generateDocumentContent(templateId, formData) {
            const templates = {
                'statement-facts': `
                    <h1>STATEMENT OF FACTS</h1>
                    
                    <p><strong>Name:</strong> ${formData.fullName || '[Name]'}</p>
                    <p><strong>Address:</strong> ${formData.address || '[Address]'}</p>
                    <p><strong>Phone:</strong> ${formData.phone || '[Phone]'}</p>
                    <p><strong>Email:</strong> ${formData.email || '[Email]'}</p>
                    
                    <h2>CASE INFORMATION</h2>
                    <p><strong>Matter:</strong> ${formData.caseTitle || '[Case Title]'}</p>
                    <p><strong>Date of Incident:</strong> ${formData.dateOfIncident || '[Date]'}</p>
                    <p><strong>Location:</strong> ${formData.location || '[Location]'}</p>
                    
                    <h2>STATEMENT OF FACTS</h2>
                    <p>${formData.factualBackground || '[Factual background will be inserted here]'}</p>
                    
                    <h2>KEY EVENTS</h2>
                    <p>${formData.keyEvents || '[Key events will be listed here]'}</p>
                    
                    ${formData.witnesses ? `<h2>WITNESSES</h2><p>${formData.witnesses}</p>` : ''}
                    ${formData.evidence ? `<h2>EVIDENCE</h2><p>${formData.evidence}</p>` : ''}
                    
                    <p>I declare under penalty of perjury that the foregoing is true and correct.</p>
                    
                    <div class="signature-line"></div>
                    <p>Signature</p>
                    
                    <p>Date: <span class="date-line"></span></p>
                `,
                'evidence-request': `
                    <h1>REQUEST FOR EVIDENCE</h1>
                    
                    <p>Date: ${formData.requestDate || new Date().toLocaleDateString()}</p>
                    
                    <p>To: ${formData.recipientName || '[Recipient Name]'}<br>
                    ${formData.recipientAddress || '[Recipient Address]'}</p>
                    
                    <p><strong>Re: ${formData.caseReference || '[Case Reference]'}</strong></p>
                    
                    <p>Dear ${formData.recipientName || '[Recipient Name]'},</p>
                    
                    <p>I am writing to formally request the following documents and evidence related to the above-referenced matter:</p>
                    
                    <p>${formData.documentsRequested || '[List of requested documents]'}</p>
                    
                    ${formData.timeFrame ? `<p><strong>Time Frame:</strong> ${formData.timeFrame}</p>` : ''}
                    ${formData.legalBasis ? `<p><strong>Legal Basis:</strong> ${formData.legalBasis}</p>` : ''}
                    
                    <p>Please provide the requested documents by ${formData.deadline || '[Deadline Date]'}.</p>
                    
                    <p>Thank you for your prompt attention to this matter.</p>
                    
                    <p>Sincerely,</p>
                    <div class="signature-line"></div>
                    <p>[Your Name]</p>
                `,
                'cease-desist': `
                    <h1>CEASE AND DESIST LETTER</h1>
                    
                    <p>Date: ${new Date().toLocaleDateString()}</p>
                    
                    <p>To: ${formData.recipientName || '[Recipient Name]'}<br>
                    ${formData.recipientAddress || '[Recipient Address]'}</p>
                    
                    <p>Dear ${formData.recipientName || '[Recipient Name]'},</p>
                    
                    <p>I am writing to demand that you immediately cease and desist from the following conduct:</p>
                    
                    <p>${formData.conductDescription || '[Description of problematic conduct]'}</p>
                    
                    ${formData.conductDates ? `<p><strong>Dates of Conduct:</strong> ${formData.conductDates}</p>` : ''}
                    
                    <p><strong>Harm Caused:</strong> ${formData.harmCaused || '[Description of harm]'}</p>
                    
                    ${formData.legalViolation ? `<p><strong>Legal Violation:</strong> ${formData.legalViolation}</p>` : ''}
                    
                    <p><strong>DEMANDS:</strong></p>
                    <p>${formData.specificDemands || '[Specific demands]'}</p>
                    
                    <p>You must comply with these demands by ${formData.deadline || '[Deadline Date]'}.</p>
                    
                    ${formData.consequences ? `<p><strong>Consequences of Non-Compliance:</strong> ${formData.consequences}</p>` : ''}
                    
                    <p>This letter serves as formal notice of your unlawful conduct and my demand that you cease such conduct immediately.</p>
                    
                    <p>Sincerely,</p>
                    <div class="signature-line"></div>
                    <p>[Your Name]</p>
                `,
                'complaint-letter': `
                    <h1>FORMAL COMPLAINT</h1>
                    
                    <p>Date: ${new Date().toLocaleDateString()}</p>
                    
                    <p>To: ${formData.recipientOrganization || '[Organization Name]'}<br>
                    ${formData.recipientAddress || '[Organization Address]'}</p>
                    
                    ${formData.referenceNumber ? `<p><strong>Reference Number:</strong> ${formData.referenceNumber}</p>` : ''}
                    <p><strong>Date of Incident:</strong> ${formData.incidentDate || '[Incident Date]'}</p>
                    
                    <p>Dear Sir/Madam,</p>
                    
                    <p>I am writing to file a formal complaint regarding the following matter:</p>
                    
                    <p><strong>Summary:</strong> ${formData.complaintSummary || '[Complaint summary]'}</p>
                    
                    <p><strong>Detailed Description:</strong></p>
                    <p>${formData.detailedDescription || '[Detailed description of the complaint]'}</p>
                    
                    ${formData.previousAttempts ? `<p><strong>Previous Resolution Attempts:</strong> ${formData.previousAttempts}</p>` : ''}
                    
                    <p><strong>Desired Resolution:</strong></p>
                    <p>${formData.desiredResolution || '[Desired resolution]'}</p>
                    
                    <p>I look forward to your prompt response and resolution of this matter.</p>
                    
                    <p>Sincerely,</p>
                    <div class="signature-line"></div>
                    <p>[Your Name]</p>
                `,
                'lawyer-questions': `
                    <h1>QUESTIONS FOR INITIAL LAWYER CONSULTATION</h1>
                    
                    <p><strong>Case Type:</strong> ${formData.caseType || '[Case Type]'}</p>
                    <p><strong>Date:</strong> ${new Date().toLocaleDateString()}</p>
                    
                    <h2>CASE ASSESSMENT QUESTIONS</h2>
                    <p>${formData.caseStrength || 'Questions about case strength will be listed here.'}</p>
                    
                    <h2>LEGAL STRATEGY QUESTIONS</h2>
                    <p>${formData.legalStrategy || 'Questions about legal strategy will be listed here.'}</p>
                    
                    <h2>TIMELINE QUESTIONS</h2>
                    <p>${formData.timelineQuestions || 'Questions about timeline will be listed here.'}</p>
                    
                    <h2>COST QUESTIONS</h2>
                    <p>${formData.costQuestions || 'Questions about costs will be listed here.'}</p>
                    
                    <h2>COMMUNICATION QUESTIONS</h2>
                    <p>${formData.communicationQuestions || 'Questions about communication will be listed here.'}</p>
                    
                    <p><em>Note: Bring this list to your consultation and take notes on the attorney's responses.</em></p>
                `,
                'deposition-checklist': `
                    <h1>DEPOSITION PREPARATION CHECKLIST</h1>
                    
                    <p><strong>Date:</strong> ${new Date().toLocaleDateString()}</p>
                    
                    <h2>PRE-DEPOSITION PREPARATION</h2>
                    
                    <h3>Document Review</h3>
                    <p>${formData.documentReview || 'Document review checklist will be listed here.'}</p>
                    
                    <h3>Factual Preparation</h3>
                    <p>${formData.factualPreparation || 'Factual preparation items will be listed here.'}</p>
                    
                    <h3>Legal Preparation</h3>
                    <p>${formData.legalPreparation || 'Legal preparation items will be listed here.'}</p>
                    
                    <h2>DAY OF DEPOSITION</h2>
                    
                    <h3>Personal Preparation</h3>
                    <p>${formData.personalPreparation || 'Personal preparation items will be listed here.'}</p>
                    
                    <h3>During Deposition Guidelines</h3>
                    <p>${formData.duringDeposition || 'Guidelines for during deposition will be listed here.'}</p>
                    
                    <p><em>Remember: The key to a successful deposition is thorough preparation and staying calm under pressure.</em></p>
                `
            };
            
            return templates[templateId] || '<p>Document template not found.</p>';
        }

        // Display generated document
        function displayDocument(content) {
            document.getElementById('documentContent').innerHTML = content;
            document.getElementById('documentPreview').style.display = 'block';
            
            // Scroll to preview
            document.getElementById('documentPreview').scrollIntoView({ behavior: 'smooth' });
        }

        // Edit document
        function editDocument() {
            document.getElementById('documentPreview').style.display = 'none';
            currentStep = 2;
            updateProgress();
        }

        // Download document
        function downloadDocument(format = 'pdf') {
            alert(`Document download in ${format.toUpperCase()} format would be initiated here. This feature requires server-side implementation.`);
        }

        // Save document
        function saveDocument() {
            const documentData = {
                template: currentTemplate,
                content: document.getElementById('documentContent').innerHTML,
                formData: collectFormData(),
                createdAt: new Date().toISOString()
            };
            
            // Save to localStorage (in a real app, this would be saved to a database)
            const savedDocuments = JSON.parse(localStorage.getItem('savedDocuments') || '[]');
            savedDocuments.push(documentData);
            localStorage.setItem('savedDocuments', JSON.stringify(savedDocuments));
            
            alert('Document saved successfully!');
        }

        // Go back to templates
        function goBackToTemplates() {
            document.getElementById('documentGenerator').classList.remove('show');
            document.getElementById('templateSelection').style.display = 'block';
            
            // Reset selected template cards
            document.querySelectorAll('.template-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            currentTemplate = null;
            currentStep = 1;
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Load case details if available
            const caseDetails = JSON.parse(localStorage.getItem('caseDetails') || '{}');
            if (caseDetails.caseType) {
                // Could pre-select relevant templates based on case type
                console.log('Case type detected:', caseDetails.caseType);
            }
        });
    </script>
</body>
</html>